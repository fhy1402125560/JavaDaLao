### 1.ArrayList的序列化是怎么实现的

ArrayList类实现类Serializable接口实现的，在ArrayList中的elementData前面用了transient修饰，目的是不希望elementData数组被序列化。每次序列化时，会先调用defaultWriteObject()方法序列化ArrayList中的非transient元素，然后遍历elementData，只序列化已存入的元素。这样会加快序列化的速度和减小序列化后的文件大小。

### 2.为什么在JDK8中HashMap要转成红黑树

如果在一个HashMap中，有很多Key发生碰撞的时候，会就产生一个超级长的链表，那么在查询时的时间复杂度就是O(n)。所以在JDK8中HashMap采用了桶+链表/红黑树，当链表长度大于等于8时，就会由链表转化为红黑树，红黑树的查询时间是O(log n)。

在JDK8之前的版本的HashMap在多线程环境下的扩容操作可能会存在死循环问题，这是由于当一个桶中有多个元素需要进行扩容时，多个线程同时对链表进行操作，头插法可能会导致链表中的节点指向错误的位置，从而形成一个环形链表，使得查询操作陷入死循环。在JDK8中采用的是尾插法而不是避免链表导致，使得插入的节点永远都是放在链表的末尾，避免了链表中的环形结构。但还是不建议在多线程下使用HashMap，因为会导致数据覆盖的问题。在并发的环境下建议使用ConcurrentHashMap

### 3.为什么不建议直接使用Spring的@Async

@Async用来标识一个方法应该在新线程中异步执行，在一些小型应用或者单体应用的场景下，@Async注解能够简化异步任务的编程。但是在大型、高并发、分布式系统下直接使用会带来一些问题。

- @Async使用的是默认的SimpleAsyncTaskExecutor线程池，这个线程池不是真的线程池，默认的线程池不重用线程，默认每次调用都会创建一个新的线程，就会导致系统占用内存过高，还可能会导致线程不会被正确的释放，造成线程泄露的问题。默认配置下，Spring不提供对异步任务的监控和管理，异常处理的粒度也不够细
- 要想更优雅的使用@Async注解，可以使用ThreadPoolTaskExecutor自定义一个线程池，可以控制线程数量、队列大小、线程命名等。或者可以使用异步消息队列(RabbitMQ、Kafka等)

### 4.有了关系型数据库，为什么还需要NOSQL

NoSQL(Not only SQL的缩写),泛指非关系型数据库，主要针对的是键值、文档以及图形类型数据存储。

**存储方式：**

关系型数据库是表格式的，存储在表的行和列中。他们之间关联协作存储很容易，提取数据方便。NoSQL相反，他是大块的组合在一起。通常存储在数据集中，例如文档、键值对、图结构

**存储结构：**

关系型数据库对应的是结构化数据，数据表都预先定义了结构，结构描述了数据的形式和内容。虽然说预定义结构带来了可靠性和稳定性，但是修改这些数据比较困难。NoSQL数据库基于动态结构，使用非结构化数据，可以很容易适应数据类型和结构的变化。

**ACID属性：**

关系型数据库通常支持ACID事务，确保数据的完整性和一致性。大多数NoSQL数据库再保证高可用和分布式性能更灵活，在一些情况下牺牲了ACID事务的支持，采用CAP(一致性、可用性、分区容忍性)理论

**扩展性：**

关系型数据库在垂直方向上(通过增加服务器的处理能力)相对容易扩展，在水平方向(通过增加服务器数量)扩展相对困难

NoSQL数据库在水平方向上扩展更容易，即在集群中添加更多的节点来处理更大的数据量和更高的负载

**用途：**

关系型数据库使用于严格数据一致性和复杂查询的应用，比如金融系统、在线交易系统。NoSQL数据库适用于大数据和实时应用，例如社交媒体、日志记录、用户个性化推荐等，其中数据模式可能需要频繁变化



### 5.什么是分布式系统？和集群的区别

分布式系统就是将一个完整的系统，按照业务功能，拆分成一个个独立的子系统。这些子系统能运行到web容器中，通过RPC通信。

分布式是指将不同的业务分布在不同的地方，集群是用几台服务器集中在一起，实现同一业务。分布式的每个节点都可以做集群，而集群不一定是分布式的。分布式系统的目的是提高系统性能，可靠性和扩展性，集群是为了提供高可用、负载均衡和容错能力。

### 6.什么是RPC，和HTTP有什么区别

RPC(Remote Procedure Call)即远程调用协议，用于在分布式系统中的不同计算机或进程之间的通信。用官方的话说RPC是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。

RPC协议假定 RPC主要目的就是让不同服务间调用方法的时候像同一服务间调用服务一样。

一个完整的RPC框架里包含了四个核心组件，分别是客户端(Client)、服务端(Server)、客户端存根(Client Stub)、服务端存根(Server Stub)。客户端是服务的调用者，服务端是提供服务的，客户端存根是存放服务端的地址信息，再将客户端请求参数打包成网络消息，再通过网络远程发送给服务端。服务端存根是接收客户端发来的消息，将消息解包，并调用本地的方法。我了解的RPC框架有阿里的Dubbo、Google的gRPC、Facebook的Thrift

HTTP是一种应用层协议，用在计算机网络上传输超文本的数据。通过请求-响应实现服务端和客户端之间的通信。使用TCP作为传输层协议，支持多种HTTP方法

RPC主要用于远程调用，即一个计算机上的程序调用另一台计算机的过程。HTTP用于在客户端和服务端传输文本或二进制数据。

RPC通常使用二进制数据格式进行通信，HTTP传输文本数据，也可以传输二进制数据(GET/POST)

RPC通常处于传输层(TCP/IP协议栈的上层)，HTTP是应用层协议

RPC通常更为灵活，可以选择不同的数据序列化和传输协议。HTTP更常用，但是数据传输效率较低。

RPC通常用于构建分布式系统中不同模块之间的通信，HTTP用于构建基于Web的应用程序的主要通信协议

### 7.Zookeeper的典型应用场景有哪些？

Zookeeper提供了高可用、高性能、稳定的分布式数据一致性解决方案，通常被用于实现 数据发布/订阅、负载均衡、命名服务、分布式协议/通知、集群管理、Master选举、分布式锁、分布式队列等功能。

### 8.什么是并发，什么是并行

并发就是系统在处理多个任务时，看起来像是这些任务同时执行。实际上这些任务是交替执行的，每个任务在一定的时间片内执行一部分，然后切换到下一任务。并发通常用于处理多个任务之间的相互独立性，不同任务之间可能会产生影响，但系统能够合理的处理他们，使得看起来像是同时运行的。并发主要是提高系统的响应性和资源利用率。

并行是指系统同时执行多个任务，每个任务都在独立的处理单元上并行运行。在并行系统中，多个任务能真正的同时运行，因为每个任务都有自己的处理器核心。

